{% extends 'base.html' %}
{% block content %}
<h2>Add New Expense</h2>
<div class="card add-expense-card">
  <form id="expenseForm">
    
    <div class="form-group">
      <label>Description</label>
      <input type="text" name="description" required placeholder="Enter description">
    </div>
    <div class="form-group">
      <label>Amount (₹)</label>
      <input type="number" name="amount" required placeholder="Enter amount">
    </div>
    <div class="form-group">
      <label>Date</label>
      <input type="date" name="date" required>
    </div>
    <button type="submit" class="btn primary">Add Expense</button>
  </form>
  <div id="successMsg" style="margin-top:10px;color:green;font-weight:600;display:none;">
    ✅ Expense added successfully!
  </div>
</div>

<script>
const form = document.getElementById('expenseForm');
form.addEventListener('submit', async e => {
  e.preventDefault();
  const formData = new FormData(form);
  const res = await fetch('/add_expense', { method:'POST', body:formData });
  const data = await res.json();
  if(data.status === "success"){
    document.getElementById('successMsg').innerText = `✅ Expense added successfully! (${data.category})`;
    document.getElementById('successMsg').style.display = 'block';
    form.reset();
  } else {
    alert(data.message);
  }
});
</script>
{% endblock %}
